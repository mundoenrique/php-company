function buscar(e){var a=$("#loading").dialog({dialogClass:"hide-close",title:"Buscando tarjetas",modal:!0,resizable:!1,position:{my:"top"},buttons:{Aceptar:{text:"Aceptar",class:"novo-btn-primary-modal",click:function(){resett(),$(this).dialog("destroy")}}}}),t=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)ceo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),r=JSON.stringify({data_orden:$("#servicio").val(),data_lote:$("#lote").val(),data_cedula:$("#cedula").val(),data_tarjeta:$("#tarjeta").val(),data_pg:e,data_paginas:serv_var.paginas,data_paginar:serv_var.paginar});r=CryptoJS.AES.encrypt(r,t,{format:CryptoJSAesJson}).toString(),$.post(baseURL+api+isoPais+"/servicios/transferencia-maestra/buscarTarjetas",{request:r,ceo_name:t,plot:btoa(t)}).done(function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),a.dialog("destroy"),data.result.ERROR?($("#resultado-tarjetas").hide(),"-29"==data.result.ERROR?(alert("Usuario actualmente desconectado"),location.reload()):notificacion("Buscando tarjetas",data.result.ERROR)):($("#resultado-tarjetas").show(),cargarResultado(data),$("#resultado-tarjetas").find(".jPag-sprevious").attr("title","anterior"),$("#resultado-tarjetas").find(".jPag-snext").attr("title","siguiente"))})}function cargarResultado(e){var a;if(serv_var.busk&&(serv_var.busk=!1,$(".table-text-service tbody").empty()),serv_var.pgTotal=parseInt(e.result.totalPaginas,10),serv_var.pgActual=parseInt(e.result.pagina,10),e.result.detalleEmisiones.length>0){serv_var.TotalTjts+=e.result.detalleEmisiones.length,$("#textS").empty(),$("#textS").append("<em>Seleccionar todo ("+serv_var.TotalTjts+" de "+e.result.totalRegistros+")</em>"),$(".table-text-service thead th").css("min-width","75px"),$(".table-text-service tbody td").css("min-width","75px");var t={ACTUALIZAR_DATOS:"&#xe02d;",CONSULTA_SALDO_TARJETA:"&#xe022;",BLOQUEO_TARJETA:"&#xe028;",DESBLOQUEO:"&#xe03f;",ENTREGAR_A_TARJETAHABIENTE:"&#xe011;",ENVIAR_A_EMPRESA:"&#xe05e;",RECIBIR_EN_EMPRESA:"&#xe062;",RECIBIR_EN_BANCO:"&#xe09c;",NINGUNA:"-"},r=[];for(var o in e.result.operacioneTarjeta)r.push(e.result.operacioneTarjeta[o].edoTarjeta);var s={"Recibir en banco":"Recibido en Banco # 1","Enviar a empresa":"Enviado a Empresa # 1","Recibir en empresa":"Recibido en empresa # 1","Entregar a tarjetahabiente":"Entregada a Tarjetahabiente / Activa # 1","Bloqueo tarjeta":"bloqueo # 2","Consulta saldo tarjeta":"saldo # 2",Desbloquear:"desbloqueo # 2"};for(var i in $.each(e.result.detalleEmisiones,function(o,s){var i=s.edoEmision.slice(0,s.edoEmision.indexOf("/")),n=-1!==$.inArray(s.edoEmision,r)?1:0,l=[];l.push(s.nombres,s.apellidos,s.numCelular,s.email),a='<tr class="'+e.result.pagina+'" tjta="'+s.nroTarjeta+'" num_lote="'+s.nroLote+'" edo_anterior="'+i[0]+'" id_ext_per="'+s.cedula+'" personal="'+l+'" >',a+='<td class="checkbox-select"><input id="check-oneTM" type="checkbox" value=""/></td>',a+='<td id="td-nombre-2" class="bp-min-width">'+s.nroTarjeta+"</td>",a+='<td class="bp-min-width">'+s.ordenS+"</td>",a+='<td class="bp-min-width">'+s.nroLote+"</td>",a+='<td class="bp-min-width">'+i+"</td>",a+='<td class="bp-min-width">'+s.edoPlastico+"</td>",a+='<td id="td-nombre-2" class="bp-min-width">'+s.nombre.toLowerCase().replace(/(^| )(\w)/g,function(e){return e.toUpperCase()})+"</td>",a+='<td class="bp-min-width">'+s.cedula+"</td>",a+='<td id="saldo'+s.nroTarjeta.replace(/[*]/g,"")+'" class="bp-min-width"> - ',a+="</td>",a+='<td class="bp-min-width">';var d="";$.each(e.result.operacioneTarjeta,function(e,r){if(s.edoEmision==r.edoTarjeta&&1==n)for(o in r.operacion)nomoperacion=MaysPrimera(r.operacion[o].toLowerCase()),d=r.operacion[o].replace(/\s/g,"_"),a+='<a id="'+d+'" title="'+nomoperacion+'" ><span class="icon" data-icon="'+t[d]+'"></span></a>',-1===$.inArray(nomoperacion,serv_var.masivos)&&serv_var.masivos.push(nomoperacion)}),""==d&&(a+="-"),a+="</td></tr>",$(".table-text-service tbody").append(a)}),optionsmasivo="",s)s.hasOwnProperty(i)&&-1!==$.inArray(i,serv_var.masivos)&&(optionsmasivo+='<option value="'+s[i]+'">'+i+"</option>");0!=serv_var.masivos.length?($("#select-tipo-proceso").empty(),$("#select-tipo-proceso").append('<option value="">Seleccionar</option>'),$("#process-masivo").show(),$("#select-tipo-proceso").append(optionsmasivo)):$("#process-masivo").hide(),paginar()}else $("#resultado-tarjetas").hide(),notificacion("Consulta tarjetas transferencia maestra","<h2>Empresa sin tarjetas asociadas</h2><h6>Saldo disponible: "+serv_var.saldoDispon+"</h6>")}function paginar(){$("#paginado-TM").paginate({count:serv_var.pgTotal,display:serv_var.paginas,start:serv_var.pgActual,border:!1,text_color:"#79B5E3",background_color:"none",text_hover_color:"#2573AF",background_hover_color:"none",images:!1,onChange:function(e){$(".table-text-service").find($("."+e)).hasClass(e)||($(".table-text-service tbody tr").hide(),$("#select-allR").is(":checked")&&($(":checkbox").each(function(){this.checked=0}),serv_var.noTarjetas=[],serv_var.dni_tarjetas=[],serv_var.lote=[],serv_var.estado_anterior=[],serv_var.monto=[],serv_var.fallidas=0),$("#resultado-tarjetas").hide(),buscar(e)),$(".table-text-service tbody tr").hide(),$(".table-text-service ."+e).show(),$("#paginado-TM .jPag-pages").css("width","600px")}}),$("#paginado-TM .jPag-pages").css("width","600px")}function resett(){$(":checkbox").each(function(){this.checked=0}),$.each($(".monto"),function(){$(this).hideBalloon()}),serv_var.noTarjetas=[],serv_var.dni_tarjetas=[],serv_var.lote=[],serv_var.estado_anterior=[],serv_var.monto=[],serv_var.fallidas=0}function toFormatShow(e){return e=e.toString(),"Pe"==isoPais||"Usd"==isoPais||"Ec-bp"==isoPais?e:"Ve"==isoPais||"Co"==isoPais?(e=toFormat(e),("Co"==isoPais?"$ ":"Bs. ")+formatoNumero(e,2,",",".")):void 0}function notificacion(e,a,t){t=null==t?0:t;var r="<div>"+a+"</div>";$(r).dialog({dialogClass:"hide-close",title:e,modal:!0,maxWidth:700,maxHeight:300,resizable:!1,position:{my:"top"},buttons:{Aceptar:{text:"Aceptar",class:"novo-btn-primary-modal",click:function(){switch(t){case 0:resett(),$(this).dialog("close");break;case 1:resett(),$(this).dialog("close"),serv_var.TotalTjts=0,serv_var.masivos=[],$("#resultado-tarjetas").hide(),$(".table-text-service tbody").empty(),buscar(serv_var.pgActual);break;case 2:$(this).dialog("close")}}}}})}function validarFields(){var e=$("#dialog-confirm").find("#nombres"),a=$("#dialog-confirm").find("#apellidos"),t=$("#dialog-confirm").find("#correo"),r=$("#dialog-confirm").find("#celular"),o=$("#dialog-confirm").find("#clave"),s=$("#dialog-confirm").find("#errornombre"),i=$("#dialog-confirm").find("#errorapellido"),n=$("#dialog-confirm").find("#errorcorreo"),l=$("#dialog-confirm").find("#errorcelular"),d=$("#dialog-confirm").find("#errorclave");spaceString("#nombres"),spaceString("#apellidos"),spaceString("#correo"),spaceString("#celular"),spaceString("#clave");return msgValido="",validInput=!0,nomRegExp=/^[a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1]+$/i,descRegExp=/^['a-z0-9ñáéíóú ,.:()']+$/i,emailRegExp=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,numRegExp=/\d+/,""===e.val()?(s.show(),s.html("El campo no puede estar vacio"),validInput=!1,e.addClass("textbox-transfer")):numRegExp.test(e.val())?(s.show(),s.html("No se admiten números"),validInput=!1,e.addClass("textbox-transfer")):nomRegExp.test(e.val())?(s.hide(),e.removeClass("textbox-transfer")):(s.show(),s.html("No se admiten caracteres especiales"),validInput=!1,e.addClass("textbox-transfer")),""===a.val()?(i.show(),i.html("El campo no puede estar vacio"),validInput=!1,a.addClass("textbox-transfer")):numRegExp.test(a.val())?(i.show(),i.html("No se admiten números"),validInput=!1,a.addClass("textbox-transfer")):nomRegExp.test(a.val())?(i.hide(),a.removeClass("textbox-transfer")):(i.show(),i.html("No se admiten caracteres especiales"),validInput=!1,a.addClass("textbox-transfer")),""===t.val()?(n.show(),n.html("El campo no puede estar vacio"),validInput=!1,t.addClass("textbox-transfer")):emailRegExp.test(t.val())?(n.hide(),t.removeClass("textbox-transfer")):(n.show(),n.html("Formato de correo incorrecto (ejemlo@datos.com)"),validInput=!1,t.addClass("textbox-transfer")),r.val().length>13?(l.show(),l.html("el campo solo debe tener maximo 13 numeros"),validInput=!1,r.addClass("textbox-transfer")):numRegExp.test(r.val())?(l.hide(),r.removeClass("textbox-transfer")):(l.show(),l.html("El campo debe ser numerico"),validInput=!1,r.addClass("textbox-transfer")),""===o.val()?(d.show(),d.html("El campo no puede estar vacio"),validInput=!1,o.addClass("textbox-transfer")):(d.hide(),o.removeClass("textbox-transfer")),validInput}function spaceString(e){var a=$("#dialog-confirm").find(e),t=a.val();t=t.trim(),t=t.replace(/ +/g," "),a.val(t)}function MaysPrimera(e){return e.charAt(0).toUpperCase()+e.slice(1)}function procesar(e,a,t){t=null!=t?t:1;var r="<div id='dialog-confirm'>";r+="<form name='no-form' onsubmit='return false'>",r+="<center>Tarjeta: "+serv_var.noTarjetas+"</center>",r+="<br><p><input type='password' name='pass' id='pass' placeholder='Ingresa tu contraseña' size='28'></p>",r+="</fieldset><h5 id='msg'></h5>",r+="</form>",r+="</div>",$(r).dialog({dialogClass:"hide-close",title:e,modal:!0,position:{my:"top 800"},close:function(){resett(),$(this).dialog("destroy")},buttons:{Cancelar:{text:"Cancelar",class:"novo-btn-secondary-modal",style:"border-color: #ffdd00 !important;background:white !important;",click:function(){$(this).dialog("close")}},Aceptar:function(){if(pass=$(this).find("#pass").val(),""!==pass){var r=$(this).find("form");validateForms(r),r.valid()?(llamarWSCambio(pass,e,a,t),$(this).find("#pass").val(""),$(this).dialog("destroy")):($(this).find("#msg").empty(),$(this).find("#msg").append("Contraseña inválida"))}else $(this).find("#msg").empty(),$(this).find("#msg").append("Debes ingresar la contraseña");resett()}}})}function llamarActDatos(e,a){var t=$("#loading").dialog({dialogClass:"hide-close",title:a,modal:!0,bgiframe:!0,dialogClass:"hide-close",close:function(){t.dialog("close")},position:{my:"top"}});pass=hex_md5(clave);var r="act_datos",o=JSON.stringify({lote:serv_var.lote,nombres:nombres,apellidos:apellidos,correo:correo,celular:celular,pass:pass,estado_nuevo:serv_var.estado_nuevo,estado_anterior:serv_var.estado_anterior,tarjeta:serv_var.noTarjetas,id_ext_per:serv_var.dni_tarjetas,opcion:r}),s=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)ceo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));o=CryptoJS.AES.encrypt(o,s,{format:CryptoJSAesJson}).toString(),$.post(baseURL+api+isoPais+e,{request:o,ceo_name:s,plot:btoa(s)}).done(function(e){data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),t.dialog("destroy"),data.result.ERROR?"-29"==data.result.ERROR?(alert("Usuario actualmente desconectado"),location.reload()):notificacion("mensaje",data.result.ERROR,2):notificacion("Actualizar datos","Proceso realizado correctamente",1)})}function llamarWSCambio(e,a,t,r){var o=$("#loading").dialog({dialogClass:"hide-close",title:a,modal:!0,bgiframe:!0,dialogClass:"hide-close",close:function(){o.dialog("close")},position:{my:"top"}});e=hex_md5(e),$("#claveMasivo").val("");var s=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)ceo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1")),i=JSON.stringify({lote:serv_var.lote,estado_nuevo:serv_var.estado_nuevo,estado_anterior:serv_var.estado_anterior,tarjeta:serv_var.noTarjetas,id_ext_per:serv_var.dni_tarjetas,opcion:r,pass:e});i=CryptoJS.AES.encrypt(i,s,{format:CryptoJSAesJson}).toString(),$.post(baseURL+api+isoPais+t,{request:i,ceo_name:s,plot:btoa(s)}).done(function(e){if(data=JSON.parse(CryptoJS.AES.decrypt(e.code,e.plot,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),o.dialog("destroy"),-1==data.result.rc)notificacion(a,"La contraseña es incorrecta. Por favor verifícala e intenta de nuevo.",t);else if(data.result.ERROR)"-29"==data.result.ERROR?(alert("Usuario actualmente desconectado"),location.reload()):notificacion(a,data.result.ERROR,2);else{var t=1;"saldo"==r&&(t=2,mostrar_saldo(data)),notificacion(a,"Proceso realizado correctamente",t)}resett()})}function mostrar_saldo(e){$.each(JSON.parse(e.result.bean),function(e,a){void 0!==a.saldo?$("#saldo"+a.numeroTarjeta.replace(/[*]/g,"")).text(a.saldo):($("#saldo"+a.numeroTarjeta.replace(/[*]/g,"")).empty(),$("#saldo"+a.numeroTarjeta.replace(/[*]/g,"")).append('<span title="'+a.msgNovoTrans+'"  class="icon" data-icon="&#xe04b;"></span>'))})}function removeItemFromArr(e,a){var t=e.indexOf(a);e.splice(t,1)}var nombres,apellidos,correo,celular,clave,serv_var={pgTotal:1,pgActual:1,busk:!1,paginas:10,paginar:!0,dni_tarjetas:[],noTarjetas:[],TotalTjts:0,actualizarDatos:"hidden",consulta:"hidden",bloquear:"hidden",desbloqear:"hidden",entregar:"hidden",enviar:"hidden",recibirBanco:"hidden",recibirEmpresa:"hidden",maestroParam:null,cantXdia:null,acumXsem:null,monto:[],saldoDispon:0,montoMin:0,fallidas:0,masivos:[],lote:[],estado_nuevo:"",estado_anterior:[],items:[]};$("#buscar").on("click",function(){$(":checkbox").each(function(){this.checked=0}),serv_var.masivos=[];var e=/^\d*$/,a=$("#servicio"),t=$("#lote"),r=$("#cedula"),o=$("#tarjeta"),s=!0,i='<div id="validar">';0==a.val().length&&0==t.val().length&&0==r.val().length&&0==o.val().length?(i+="<p>* Debe agregar al menos un campo</p>",s=!1):(a.val().length>0&&!e.test(a.val())?(i+="<p>* El campo orden de servicio debe ser numerico</p>",s=!1,a.css("border-color","#cd0a0a")):a.removeAttr("style"),t.val().length>0&&!e.test(t.val())?(i+="<p>* El campo lote debe ser numerico</p>",s=!1,t.css("border-color","#cd0a0a")):t.removeAttr("style"),r.val().length>0&&!e.test(r.val())?(i+="<p>* El campo cédula debe ser numerico</p>",s=!1,r.css("border-color","#cd0a0a")):r.removeAttr("style"),o.val().length>0&&!e.test(o.val())?(i+="<p>* El campo tarjeta debe ser numerico</p>",s=!1,o.css("border-color","#cd0a0a")):o.removeAttr("style")),i+="</div>",s?(serv_var.busk=!0,serv_var.TotalTjts=0,buscar(1)):$(i).dialog({dialogClass:"hide-close",title:"Campos inválidos",modal:!0,resizable:!1,draggable:!1,open:function(e,a){$(".ui-dialog-titlebar-close",a.dialog).hide()},buttons:{Aceptar:{text:"Aceptar",class:"novo-btn-primary-modal",click:function(){resett(),$(this).dialog("destroy")}}}})}),$("#select-allR").on("click",function(){$(this).is(":checked")?$(":checkbox").each(function(){this.checked=1,null!=$(this).parents("tr").attr("tjta")&&(serv_var.lote.push($(this).parents("tr").attr("num_lote")),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")))}):($(":checkbox").each(function(){this.checked=0}),resett())}),$("#exportXLS_a").on("click",function(){var e=$("#servicio").val(),a=$("#lote").val(),t=$("#cedula").val(),r=$("#tarjeta").val(),o=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)ceo_cook\s*\=\s*([^;]*).*$)|^.*$/,"$1"));$("form#formulario").empty(),$("form#formulario").append('<input type="hidden" name="ceo_name" value="'+o+'">'),$("form#formulario").append('<input type="hidden" name="servicio" value="'+e+'">'),$("form#formulario").append('<input type="hidden" name="cedula" value="'+t+'">'),$("form#formulario").append('<input type="hidden" name="tarjeta" value="'+r+'">'),$("form#formulario").append('<input type="hidden" name="lote" value="'+a+'">'),$("form#formulario").append('<input type="hidden" name="paginaActual" value="'+serv_var.pgActual+'" />'),$("form#formulario").attr("action",baseURL+api+isoPais+"/servicios/consultaTarjetasExpXLS"),$("form#formulario").submit()}),$(".table-text-service").on("click","#RECIBIR_EN_BANCO",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Recibido en Banco",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote")),url="/servicios/cambiarEstadoemision",procesar("Recibir en banco",url)}),$(".table-text-service").on("click","#CONSULTA_SALDO_TARJETA",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Saldo",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote")),op="saldo",url="/servicios/cambiarEstadotarjeta",procesar("Consultar saldo",url,op)}),$(".table-text-service").on("click","#RECIBIR_EN_EMPRESA",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Recibido en Empresa",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote")),url="/servicios/cambiarEstadoemision",procesar("Recibir tarjeta en empresa",url)}),$(".table-text-service").on("click","#BLOQUEO_TARJETA",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Bloqueada",serv_var.estado_anterior=["Desbloqueada"],serv_var.lote.push($(this).parents("tr").attr("num_lote")),op="bloqueo",url="/servicios/cambiarEstadotarjeta",procesar("Bloquear de tarjeta",url,op)}),$(".table-text-service").on("click","#DESBLOQUEO",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Desbloqueada",serv_var.estado_anterior=["Bloqueada"],serv_var.lote.push($(this).parents("tr").attr("num_lote")),op="desbloqueo",url="/servicios/cambiarEstadotarjeta",procesar("Desbloquear de tarjeta",url,op)}),$(".table-text-service").on("click","#ENVIAR_A_EMPRESA",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Enviado a Empresa",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote")),url="/servicios/cambiarEstadoemision",procesar("Enviar tarjeta a empresa",url)}),$(".table-text-service").on("click","#ENTREGAR_A_TARJETAHABIENTE",function(){resett(),serv_var.noTarjetas.push($(this).parents("tr").attr("tjta")),serv_var.dni_tarjetas.push($(this).parents("tr").attr("id_ext_per")),serv_var.estado_nuevo="Entregada a Tarjetahabiente / Activa",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote")),url="/servicios/cambiarEstadoemision",procesar("Entregar tarjeta",url)}),$(".table-text-service").on("click","#ACTUALIZAR_DATOS",function(){serv_var.noTarjetas=[$(this).parents("tr").attr("tjta")],serv_var.dni_tarjetas=[$(this).parents("tr").attr("id_ext_per")],serv_var.estado_nuevo="Actualizar datos",serv_var.estado_anterior.push($(this).parents("tr").attr("edo_anterior")),serv_var.lote.push($(this).parents("tr").attr("num_lote"));var e=$(this).parents("tr").attr("personal");e=e.split(",");var a="<div id='dialog-confirm'>";a+="<form name='no-form' onsubmit='return false'>",a+='<div id="campos-transfer">',a+="<span><p>Nombre:</p>",a+='<input type="text" name="pass" id="nombres" value="'+e[0]+'">',a+='<li id="errornombre" style="display:none"></li>',a+="</span>",a+="<span><p>Apellidos:</p>",a+='<input type="text" name="pass" id="apellidos" value="'+e[1]+'">',a+='<li id="errorapellido" style="display:none"></li>',a+="</span>",a+="</div>",a+='<div id="campos-transfer">',a+="<span><p>Correo:</p>",a+='<input type="text" name="pass" id="correo" value="'+e[3]+'">',a+='<li id="errorcorreo" style="display:none"></li>',a+="</span>",a+="</div>",a+='<div id="campos-transfer">',a+="<span><p>Teléfono celular:</p>",a+='<input type="text" name="pass" id="celular" value="'+e[2]+'">',a+='<li id="errorcelular" style="display:none"></li>',a+="</span>",a+="<span><p>Contraseña: </p>",a+='<input type="password" name="numero" id="clave" placeholder="Ingrese su contraseña" maxlength="16">',a+='<li id="errorclave" style="display:none"></li>',a+="</span>",a+="</div>",a+="</fieldset><h5 id='msg'></h5>",a+="</form>",a+="</div>",$(a).dialog({dialogClass:"close",title:"Actualizar datos tarjetahabiente",modal:!0,width:500,top:900,position:{my:"top 800"},close:function(){resett(),$(this).dialog("destroy")},buttons:{Aceptar:function(){$(this).find("#msg").empty();var e=validarFields();1==e&&(nombres=$("#nombres").val(),apellidos=$("#apellidos").val(),correo=$("#correo").val(),celular=$("#celular").val(),clave=$("#clave").val(),$(this).dialog("destroy"),url="/servicios/cambiarEstadoemision",llamarActDatos(url,"Actualizar datos"))}}})}),$(".table-text-service").on("click","#check-oneTM",function(){var e=$(this).parents("tr").attr("num_lote"),a=$(this).parents("tr").attr("tjta"),t=$(this).parents("tr").attr("id_ext_per"),r=$(this).parents("tr").attr("edo_anterior");$(this).is(":checked")?(serv_var.lote.push(e),serv_var.noTarjetas.push(a),serv_var.dni_tarjetas.push(t),serv_var.estado_anterior.push(r)):(removeItemFromArr(serv_var.lote,e),removeItemFromArr(serv_var.noTarjetas,a),removeItemFromArr(serv_var.dni_tarjetas,t),removeItemFromArr(serv_var.estado_anterior,r))}),$("#select-tipo-proceso").on("change",function(){acrif=$("option:selected",this).attr("value"),""!==acrif?$("#claveMasivo, #button-masivo").prop("disabled",!1):$("#claveMasivo, #button-masivo").prop("disabled",!0)}),$("#button-masivo").click(function(){serv_var.estado_nuevo=$("#select-tipo-proceso").val(),urlproc=serv_var.estado_nuevo.split(" # "),serv_var.estado_nuevo=urlproc[0];var e=$("#claveMasivo"),a="";url=1==urlproc[1]?"/servicios/cambiarEstadoemision":"/servicios/cambiarEstadotarjeta",0==serv_var.noTarjetas.length&&(a+="<p>* Debes seleccionar al menos un registro.</p>"),""==e.val()&&(a+="<p>* Debes ingresar tu clave.</p>"),""!=a?notificacion("Proceso masivo",a,2):llamarWSCambio(e.val(),"Proceso Masivo",url,urlproc[0])});